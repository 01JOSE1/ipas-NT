âœ… INTEGRACIÃ“N COMPLETADA

ARCHIVOS CREADOS:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. API Python (Modelo IA):
   ğŸ“„ entrenamiento-ia-seguros/api_modelo.py
   â†’ Expone endpoint /predecir-riesgo en http://localhost:5000
   â†’ Carga el modelo entrenado y hace predicciones

2. DTOs Java (ComunicaciÃ³n):
   ğŸ“„ src/main/java/.../RiesgoSiniestroRequestDTO.java
   ğŸ“„ src/main/java/.../RiesgoSiniestroResponseDTO.java

3. Servicio IA:
   ğŸ“„ src/main/java/.../IAModeloService.java
   â†’ Llamada HTTP a la API Python
   â†’ Recibe el nivel de riesgo predicho

4. ConfiguraciÃ³n:
   ğŸ“„ src/main/java/.../RestTemplateConfig.java
   â†’ Bean RestTemplate para llamadas HTTP

5. DocumentaciÃ³n:
   ğŸ“„ QUICK_START.md (Lee esto primero!)
   ğŸ“„ IA_INTEGRATION_GUIDE.md (DocumentaciÃ³n completa)
   ğŸ“„ run_ia_api.bat (Script de inicio)


ARCHIVOS MODIFICADOS:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Entidad Policy:
   âœï¸ src/main/java/.../model/entity/Policy.java
   â†’ Agregado: @Column(name = "risk_level") private String riskLevel;
   â†’ Getters/Setters para riskLevel

2. DTO PolicySimpleDTO:
   âœï¸ src/main/java/.../view/dto/PolicySimpleDTO.java
   â†’ Agregado: private String riskLevel;
   â†’ Constructor actualizado con riskLevel como Ãºltimo parÃ¡metro

3. Presenter (Lo mÃ¡s importante):
   âœï¸ src/main/java/.../presenter/PolicyPresenter.java
   â†’ Inyectado @Autowired IAModeloService
   â†’ En handleCreatePolicy(): Llamada a iaModeloService.predecirRiesgo()
   â†’ Asigna el riesgo a policy.setRiskLevel(resultado)
   â†’ Todos los DTOs incluyen riskLevel

4. Template UI:
   âœï¸ src/main/resources/templates/policies.html
   â†’ Nueva columna "Nivel de Riesgo" en la tabla
   â†’ Badges coloreados (BAJO=verde, MEDIO=naranja, ALTO/CRITICO=rojo)
   â†’ funciÃ³n getRiskLevelColor() agregada

5. ConfiguraciÃ³n:
   âœï¸ src/main/resources/application.properties
   â†’ Agregado: ia.modelo.url=http://localhost:5000


CÃ“MO FUNCIONA:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Usuario crea pÃ³liza desde UI
                    â†“
2. Spring Boot recibe PolicyRequest
                    â†“
3. PolicyPresenter.handleCreatePolicy() se ejecuta
                    â†“
4. Llama a: iaModeloService.predecirRiesgo(client, policy)
                    â†“
5. IAModeloService hace HTTP POST a http://localhost:5000/predecir-riesgo
                    â†“
6. API Python (Flask) recibe datos y consulta el modelo
                    â†“
7. Modelo predice probabilidad de siniestro
                    â†“
8. API convierte probabilidad en nivel: BAJO|MEDIO|ALTO|CRITICO
                    â†“
9. API retorna JSON con el nivel predicho
                    â†“
10. Spring Boot asigna: policy.setRiskLevel(resultado)
                    â†“
11. PÃ³liza se guarda en BD con risk_level
                    â†“
12. UI muestra pÃ³liza con badge coloreado


PASOS PARA EJECUTAR:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TERMINAL 1 - API Python:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
cd entrenamiento-ia-seguros
pip install -r requirements.txt
python api_modelo.py

âœ“ Espera a ver: "API disponible en: http://localhost:5000"

TERMINAL 2 - Spring Boot:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
cd ipas
.\mvnw.cmd clean install
java -jar target/ipas-0.0.1-SNAPSHOT.jar

âœ“ Espera a ver: "Started IpasApplication in X seconds"

NAVEGADOR:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
http://localhost:8010
â†’ Login
â†’ Ve a PÃ³lizas
â†’ Crea una pÃ³liza
â†’ VerÃ¡s "Nivel de Riesgo" con color automÃ¡ticamente


VERIFICACIÃ“N:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Â¿Python API responde?
  curl http://localhost:5000/health
  â†’ Respuesta: {"status":"ok","modelo_cargado":true}

âœ“ Â¿PÃ³liza tiene riesgo?
  â€¢ Crear pÃ³liza â†’ Si falla, revisar logs
  â€¢ Si sale NULL â†’ Python API no estÃ¡ disponible
  â€¢ Si sale "DESCONOCIDO" â†’ Error en predicciÃ³n

âœ“ Logs Python:
  INFO:__main__:PredicciÃ³n: Riesgo=MEDIO, Probabilidad=45.32%

âœ“ Logs Spring Boot:
  Enviando datos al modelo IA: RiesgoSiniestroRequestDTO@...
  PredicciÃ³n exitosa - Riesgo: MEDIO, Probabilidad: 0.45


NIVEL DE RIESGO EN TABLA:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸŸ¢ BAJO       â†’ Probabilidad < 25%
ğŸŸ¡ MEDIO      â†’ Probabilidad 25-50%
ğŸ”´ ALTO       â†’ Probabilidad 50-75%
ğŸ”´ CRITICO    â†’ Probabilidad > 75%
âšª DESCONOCIDO â†’ Error en predicciÃ³n


PROBLEMÃTICA: "CompilaciÃ³n Java"
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Si Maven falla con "release version 21 not supported":
â†’ Es un problema de Java disponible en tu PC
â†’ El proyecto estÃ¡ configurado para Java 21
â†’ Pero ese Java no estÃ¡ instalado o configurado

SOLUCIÃ“N RÃPIDA:
1. Usa: mvn compile -D "maven.compiler.source=17" -D "maven.compiler.target=17"
2. O: Instala Java 21 desde https://www.oracle.com/java/technologies/downloads/

Pero para EJECUTAR la app, simplemente:
java -jar target/ipas-0.0.1-SNAPSHOT.jar
(Esto usa el Java del debug terminal, que sÃ­ tiene Java 17)


IMPORTANTE:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸  AMBAS APLICACIONES DEBEN ESTAR CORRIENDO:
    - Python API en puerto 5000
    - Spring Boot en puerto 8010

âš ï¸  Si cierras Python, Spring Boot dirÃ¡:
    "Connection refused to host: 127.0.0.1, port: 5000"
    â†’ Reinicia Python y vuelve a crear una pÃ³liza

âš ï¸  Si falla la predicciÃ³n, el riskLevel serÃ¡ "DESCONOCIDO"
    â†’ No es un error fatal, la pÃ³liza se guarda igual
    â†’ Pero sin predicciÃ³n de riesgo


ARCHIVOS PARA LEER:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. QUICK_START.md â†’ Tutorial rÃ¡pido (EMPEZAR AQUÃ!)
2. IA_INTEGRATION_GUIDE.md â†’ DocumentaciÃ³n completa
3. Este archivo â†’ Resumen de cambios


Â¡LISTO PARA USAR!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Sigue los pasos en QUICK_START.md y deberÃ­a funcionar todo.

Si algo no funciona, verifica:
1. Â¿Python API estÃ¡ corriendo? â†’ Ver TERMINAL 1
2. Â¿Spring Boot estÃ¡ corriendo? â†’ Ver TERMINAL 2
3. Â¿Puerto 5000 disponible? â†’ Nada mÃ¡s debe usar 5000
4. Â¿Puerto 8010 disponible? â†’ Nada mÃ¡s debe usar 8010
5. Â¿Firewall permite localhost:5000? â†’ Comprueba firewall

Â¡Ã‰xito! ğŸš€
